# 1.美味小镇

#### 一.功能实现

###### 1.自动加油（post）

- 1.1 封包基本网址与***cookies***
- 1.1 post提交，执行ajax请求0
- 1.2 if判断响应包含“请求成功”，则返回成功（true），否返回false



###### 2.自动打蟑螂 (post)

- 2.0爬取列表页，通过imp图标确定有蟑螂的饭店

- 2.1定时判断体力是否足够，
- 2.2 足够打蟑螂，不足够退出
- 2.3 正则获取蟑螂位置，***封装成对象转成map提交*** post
- 2.4 其他层和第一层的区别，进入饭店后。如果***list集合为空***。则获取其他楼的链接再次匹配蟑螂



###### 3.获取油量 (get)

- 3.1 请求首页，正则匹配数据，封装对象返回



###### 4.获取体力（get）

- 4.1 请求体力页，正则匹配数据，返回数据



###### 5.获取全部（get）

- 5.1 转换成DTO对象，只返回金币和经验





#### 二.现存bug

#### 三.后续任务



# 2.纵横四海

#### 一.功能实现

*分析：当进入网址时，会有两种情况，1.处于攻击状态，2.正常状态。由于是动态链接，所以需要根据上一个响应体的内容匹配攻击或者怪物链接。*



###### 1.自动打怪（post）

- 1.1 处于攻击状态时，先匹配攻击脚本，退出状态
- 1.2 正常状态，匹配怪物，进入怪物页以后再匹配攻击
- 1.3 保存数据，先 ***存入缓存*** ，再存入数据库
- 1.4 通过控制boolean对象，***停止* **攻击
- 1.5 调用 ***异步方法*** 存mysql，不影响当前线程打怪



###### 2.获取经验值 (post)

- 1.1 如果处于攻击页，先攻击或者撤退退出攻击状态
- 1.2 请求个人页匹配数据并返回





#### 二.现存bug

1.未知的请求头，怀疑是https请求，但已忽略证书。jdk ***安装证书*** 颇为繁琐

```
Error parsing HTTP request header
 Note: further occurrences of HTTP request parsing errors will be logged at DEBUG level.

java.lang.IllegalArgumentException: Invalid character found in method name [0x030x000x000x130x0e0xe00x000x000x000x000x000x010x000x080x000x020x000x000x00...]. HTTP method names must be tokens
```



2.异步插入数据库的时候，多插入一条。



3.如果出现服务器异常Unknown，停止了，如何重启异常



#### 三.后续任务



# 3.爬虫

#### 一.功能实现

###### 1.自动爬取漫画(get)

- 1.0  封包，设置代理
- 1.1 请求页数。正则匹配含有页数的标签，提取***转换为数字存为集合***中，并***排序***，以确定最大页。
- 1.2  遍历列表页。列表页正则匹配出每一话漫画的id标示并存到Arraylist中。
- 1.3  拼接下载链接。遍历ArrayList的每一个漫画，存入***set集合以去重***。
- 1.4  输出到文件中或者sql中
- 1.5  使用***线程池，多线程***爬取漫画页。缩短到10s左右。改用CopyOnWriteArraySet并发容器防止快速失败，出现并发问题，和并发原子类AtomicInteger计数



#### 二.现存bug

#### 三.后续任务

不好接入前端，只用个控制台就好了

